<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coffee, Boba & Matcha Logger</title>
  <style>
    :root {
      --bg:#f3ede7; --card:#fffaf5; --primary:#8b5e3c; --secondary:#efe6dc;
      --text:#3b2f2a; --muted:#8a7e74; --radius:16px;
      --shadow:0 12px 30px rgba(60,40,20,0.08);
      --coffee:#8b5e3c; --boba:#cbb69a; --matcha:#9db18c;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg:#1c1815; --card:#26211d; --primary:#c08a5a; --secondary:#332c26;
        --text:#f3ede7; --muted:#b7a99c; --shadow:0 14px 34px rgba(0,0,0,0.45);
      }
    }
    *{box-sizing:border-box}
    body{margin:0;padding:3.5rem 1.25rem 3.5rem;font-family:"Satoshi","Inter",system-ui,sans-serif;background:linear-gradient(180deg,#faf6f1,var(--bg));color:var(--text)}
    .container{max-width:860px;margin:0 auto}
    h1{text-align:center;margin-bottom:.4rem}
    .subtitle{text-align:center;color:var(--muted);margin-bottom:2rem}
    .card{background:var(--card);border-radius:var(--radius);padding:2rem;box-shadow:var(--shadow);margin-bottom:2rem}
    label{display:block;margin-top:1rem}
    select,input{width:100%;margin-top:.5rem;padding:.75rem;border-radius:14px;border:1px solid #e6dacf}
    button{width:100%;margin-top:1.25rem;padding:.85rem;border-radius:999px;border:none;background:var(--primary);color:#fff;font-weight:600;cursor:pointer}
    button.secondary{background:var(--secondary);color:var(--text)}
    .hidden{display:none}
    .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.75rem;margin-top:1rem}
    .stat{background:#f6ede4;border-radius:14px;padding:.85rem;text-align:center}
    .stat-label{margin-left:.25rem;color:var(--muted)}
    .tabs{display:flex;gap:.5rem;margin-bottom:1.75rem}
    .tab{padding:.6rem 1.25rem;border-radius:999px;border:none;background:var(--secondary);cursor:pointer}
    .tab.active{background:var(--primary);color:#fff}
    canvas{max-width:100%; margin-top:1.25rem; margin-bottom:1.25rem;}
    .bottom-metrics{margin-top:1rem;display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.75rem; padding-top:1rem; padding-bottom:1rem;}
  </style>
</head>
<body>
  <h1>‚òïüßãüçµ Drink Logger</h1>
  <p class="subtitle">by Shannon</p>

  <nav class="container"><div class="tabs">
    <button class="tab active" data-tab="main">Logger</button>
    <button class="tab" data-tab="history">History</button>
  </div></nav>

  <section id="mainTab" class="container">
    <div class="card">
      <label>What did you drink?
        <select id="drinkType">
          <option value="">Select one</option>
          <option value="coffee">‚òï Coffee</option>
          <option value="boba">üßã Boba</option>
          <option value="matcha">üçµ Matcha</option>
        </select>
      </label>
      <label id="storeField" class="hidden">Where did you get it?
        <input id="store" />
      </label>
      <label id="paidField" class="hidden">Did you pay?
        <select id="paid"><option value="">Select</option><option>yes</option><option>no</option></select>
      </label>
      <label id="priceField" class="hidden">Price
        <input id="price" type="number" step="0.01" />
      </label>
      <label id="qtyField" class="hidden">Quantity
        <input id="qty" type="number" min="1" value="1" />
      </label>
      <button id="save">Log drink</button>
    </div>

    <div class="card">
      <h2>üìä Your year so far</h2>
      <div class="stats-grid" id="topStats">
        <div class="stat"><strong id="total">0</strong><span class="stat-label"> Total</span></div>
        <div class="stat"><strong id="coffeeCount">0</strong><span class="stat-label"> Coffee</span></div>
        <div class="stat"><strong id="bobaCount">0</strong><span class="stat-label"> Boba</span></div>
        <div class="stat"><strong id="matchaCount">0</strong><span class="stat-label"> Matcha</span></div>
      </div>
      <canvas id="pie" height="260"></canvas>
      <div class="bottom-metrics">
        <div class="stat"><strong id="totalSpend">$0.00</strong><span class="stat-label"> Spent</span></div>
        <div class="stat"><strong id="weekCount">0</strong><span class="stat-label"> This week</span></div>
        <div class="stat"><strong id="monthCount">0</strong><span class="stat-label"> This month</span></div>
      </div>
    </div>
  </section>

  <section id="historyTab" class="container hidden">
    <div class="card"><h2>üìú History</h2><div id="history"></div></div>
  </section>

<script>
const $=id=>document.getElementById(id);
const getLogs=()=>JSON.parse(localStorage.getItem('drinkLogs')||'[]');
const saveLogs=l=>localStorage.setItem('drinkLogs',JSON.stringify(l));

document.querySelectorAll('.tab').forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    $('mainTab').classList.toggle('hidden',btn.dataset.tab!=='main');
    $('historyTab').classList.toggle('hidden',btn.dataset.tab!=='history');
  };
});

$('drinkType').onchange=()=>{
  const t=$('drinkType').value;
  $('storeField').classList.toggle('hidden',!t);
  $('priceField').classList.toggle('hidden',!t);
  $('qtyField').classList.toggle('hidden',!t);
  $('paidField').classList.toggle('hidden',!(t==='coffee'||t==='matcha'));
};

$('save').onclick=()=>{
  const t=$('drinkType').value, store=$('store').value.trim();
  const paid=$('paid').value, price=parseFloat($('price').value||0);
  const qty=parseInt($('qty').value||1);
  if(!t||!store||((t==='coffee'||t==='matcha')&&!paid)){
    alert('Please complete all required fields'); return;
  }
  const logs=getLogs();
  for(let i=0;i<qty;i++) logs.push({drinkType:t,store,paid:((t==='coffee'||t==='matcha')?paid:null),price,date:new Date().toISOString()});
  saveLogs(logs);
  $('store').value=$('price').value=''; $('qty').value=1; $('paid').value=''; $('drinkType').value='';
  ['storeField','priceField','qtyField','paidField'].forEach(id=>$(id).classList.add('hidden'));
  render();
};

function render(){
  const logs=getLogs();
  $('history').innerHTML='';
  logs.forEach((l,i)=>{
    const row=document.createElement('div');
    row.innerHTML=`${l.drinkType} ‚Äì ${l.store} ($${l.price}) <button data-i="${i}">‚úï</button>`;
    row.querySelector('button').onclick=()=>{logs.splice(i,1);saveLogs(logs);render();};
    $('history').appendChild(row);
  });
  $('total').textContent=logs.length;
  const c=logs.filter(l=>l.drinkType==='coffee').length;
  const b=logs.filter(l=>l.drinkType==='boba').length;
  const m=logs.filter(l=>l.drinkType==='matcha').length;
  $('coffeeCount').textContent=c; $('bobaCount').textContent=b; $('matchaCount').textContent=m;

  const spend=logs.reduce((s,l)=>s+(l.price||0),0);
  $('totalSpend').textContent=`$${spend.toFixed(2)}`;

  const now=new Date();
  const startOfWeek=new Date(now); startOfWeek.setDate(now.getDate()-now.getDay()); startOfWeek.setHours(0,0,0,0);
  const startOfMonth=new Date(now.getFullYear(),now.getMonth(),1);
  $('weekCount').textContent=logs.filter(l=>new Date(l.date)>=startOfWeek).length;
  $('monthCount').textContent=logs.filter(l=>new Date(l.date)>=startOfMonth).length;

  drawPie(c,b,m);
}

function drawPie(c,b,m){
  const ctx=$('pie').getContext('2d'); ctx.clearRect(0,0,300,300);
  const data=[[c,'#8b5e3c'],[b,'#cbb69a'],[m,'#9db18c']].filter(d=>d[0]>0);
  const total=data.reduce((s,d)=>s+d[0],0); if(!total) return;
  let a=-.5*Math.PI; const cx=150,cy=130,r=110;
  data.forEach(d=>{const ang=d[0]/total*2*Math.PI;ctx.beginPath();ctx.moveTo(cx,cy);ctx.arc(cx,cy,r,a,a+ang);ctx.closePath();ctx.fillStyle=d[1];ctx.fill();a+=ang;});
}

render();
</script>
</body>
</html>
